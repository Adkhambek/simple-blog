<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css" integrity="sha384-vSIIfh2YWi9wW0r9iZe7RJPrKwp6bG+s9QZMoITbCckVJqGCCRhc+ccxNcdpHuYu" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/fontstyle.css">
    <link rel="stylesheet" href="/lib/datatable/css/datatables.min.css">
    <link rel="stylesheet" href="/css/dashboard.css">
</head>
<body>
    <%- include('./includes/aside.html', {page: 'posts'})%>
    <main class="main">
        <%- include('./includes/header.html')%>
        <section class="main__section">
            <header class="table-top">
                <h1 class="table-title">All Posts</h1>
                <a href="/admin/post" class="new-post">New Post</a>
            </header>
             <table id="dataTable" class="table display cell-border" style="width:100%">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>title</th>
                        <th>date</th>
                        <th>image</th>
                        <th>category</th>
                        <th>action</th>
                    </tr>
                </thead>
                <tbody>
                    <% let num = 1 %>
                    <%for(post of posts){%>
                        <tr>
                            <td><%= num %></td>
                            <td style="width: 100px;">
                              <p class="blog-title"><%= post.title %></p>  
                            </td>
                            <td><%= post.date %></td>
                            <td>
                                <img src="/images/<%= post.image %>" width="150" height="100" alt="image">
                            </td>
                            <td><%= post.category %></td>
                            <td>
                                <div class="action">
                                    <a href="/admin/delete/post/<%= post.id %>" class="delete">
                                        <i class="fas fa-trash-alt"></i>
                                    </a>
                                    <a href="/admin/update/post/<%= post.id %>" class="edit">
                                        <i class="fas fa-edit"></i>
                                    </a>
                                </div>
                                
                            </td>
                        </tr> 
                    <% num++ %>
                    <%}%>
                </tbody>
            </table>
        </section>
    </main>
    <script src="/lib/jquery/jquery-3.5.1.slim.min.js"></script>
    <script src="/lib/datatable/js/datatables.min.js"></script>
    <script src="/js/admin.js"></script>
    <script>
        $(document).ready(function() {
            $('#dataTable').DataTable({

            responsive: true,
            'columnDefs': [{
            'targets':[1,3,5],
            'orderable': false,
        }]
            })
        })
    </script>
</body>
</html>